{
  "openapi": "3.0.1",
  "info": {
    "title": "RetailCo MCP API",
    "version": "1.0.0",
    "description": "RetailCo Model Context Protocol API providing access to products, stock, categories, and attributes. This API enables AI agents to help customers find products, check availability, and get product information."
  },
  "servers": [
    {
      "url": "https://fsvdcoej2h.execute-api.us-east-1.amazonaws.com/dev/mcp",
      "description": "Production MCP Server (AWS API Gateway)"
    }
  ],
  "paths": {
    "/categories": {
      "get": {
        "operationId": "getCategories",
        "summary": "Get all product categories",
        "description": "Returns a list of all available master product categories in the catalog (e.g., Apparel, Footwear, Accessories, Personal Care).",
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": ["Apparel", "Footwear", "Accessories", "Personal Care"]
                }
              }
            }
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/categories/sse": {
      "get": {
        "operationId": "getCategoriesSSE",
        "summary": "Get all product categories (SSE)",
        "description": "Returns a list of all available product categories using Server-Sent Events for streaming.",
        "responses": {
          "200": {
            "description": "Successful SSE stream",
            "content": {
              "text/event-stream": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/attributes": {
      "get": {
        "operationId": "getAttributes",
        "summary": "Get available product attributes",
        "description": "Returns available attributes for filtering products. Optionally filter by master_category to get category-specific attributes.",
        "parameters": [
          {
            "name": "master_category",
            "in": "query",
            "description": "Filter attributes by master category (Apparel, Footwear, Accessories, Personal Care)",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "genders": {
                      "type": "array",
                      "items": { "type": "string" },
                      "description": "Available genders (Men, Women, Boys, Girls, Unisex)"
                    },
                    "master_categories": {
                      "type": "array",
                      "items": { "type": "string" },
                      "description": "Available master categories"
                    },
                    "sub_categories": {
                      "type": "array",
                      "items": { "type": "string" },
                      "description": "Available sub-categories (Topwear, Bottomwear, Shoes, etc.)"
                    },
                    "article_types": {
                      "type": "array",
                      "items": { "type": "string" },
                      "description": "Available article types (Tshirts, Jeans, Jackets, etc.)"
                    },
                    "colours": {
                      "type": "array",
                      "items": { "type": "string" },
                      "description": "Available colors"
                    },
                    "seasons": {
                      "type": "array",
                      "items": { "type": "string" },
                      "description": "Available seasons (Summer, Fall, Winter, Spring)"
                    },
                    "usages": {
                      "type": "array",
                      "items": { "type": "string" },
                      "description": "Available usage types (Casual, Sports, Formal, Ethnic)"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/query-products": {
      "get": {
        "operationId": "queryProducts",
        "summary": "Search and filter products",
        "description": "Search for products using various filters like category, gender, color, season, usage, and price range. Returns matching products with their details.",
        "parameters": [
          {
            "name": "gender",
            "in": "query",
            "description": "Filter by gender",
            "schema": {
              "type": "string",
              "enum": ["Men", "Women", "Boys", "Girls", "Unisex"]
            }
          },
          {
            "name": "master_category",
            "in": "query",
            "description": "Filter by master category",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "sub_category",
            "in": "query",
            "description": "Filter by sub-category (e.g., Topwear, Bottomwear, Shoes)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "article_type",
            "in": "query",
            "description": "Filter by article type (e.g., Tshirts, Jeans, Jackets)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "base_colour",
            "in": "query",
            "description": "Filter by color (e.g., Black, Blue, Red, White)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "season",
            "in": "query",
            "description": "Filter by season",
            "schema": {
              "type": "string",
              "enum": ["Summer", "Fall", "Winter", "Spring"]
            }
          },
          {
            "name": "usage",
            "in": "query",
            "description": "Filter by usage type",
            "schema": {
              "type": "string",
              "enum": ["Casual", "Sports", "Formal", "Ethnic"]
            }
          },
          {
            "name": "year",
            "in": "query",
            "description": "Filter by year",
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "min_price",
            "in": "query",
            "description": "Minimum price filter",
            "schema": {
              "type": "number",
              "minimum": 0
            }
          },
          {
            "name": "max_price",
            "in": "query",
            "description": "Maximum price filter",
            "schema": {
              "type": "number",
              "minimum": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "description": "Unique product ID"
                      },
                      "gender": {
                        "type": "string",
                        "description": "Product gender"
                      },
                      "master_category": {
                        "type": "string",
                        "description": "Master category"
                      },
                      "sub_category": {
                        "type": "string",
                        "description": "Sub-category"
                      },
                      "article_type": {
                        "type": "string",
                        "description": "Article type"
                      },
                      "base_colour": {
                        "type": "string",
                        "description": "Base color"
                      },
                      "season": {
                        "type": "string",
                        "description": "Season"
                      },
                      "year": {
                        "type": "number",
                        "description": "Year"
                      },
                      "usage": {
                        "type": "string",
                        "description": "Usage type"
                      },
                      "product_display_name": {
                        "type": "string",
                        "description": "Product display name"
                      },
                      "price": {
                        "type": "number",
                        "description": "Product price"
                      },
                      "stock": {
                        "type": "integer",
                        "description": "Available stock quantity"
                      },
                      "image_url": {
                        "type": "string",
                        "description": "Product image URL"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/query-stock": {
      "get": {
        "operationId": "queryStock",
        "summary": "Check product stock availability",
        "description": "Check stock availability for specific products by ID or by searching product name. Returns stock information and product details.",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "description": "Product ID to check stock for",
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "name",
            "in": "query",
            "description": "Search products by name to check stock",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    {
                      "type": "object",
                      "properties": {
                        "found": {
                          "type": "boolean",
                          "description": "Whether product was found"
                        },
                        "id": {
                          "type": "integer",
                          "description": "Product ID"
                        },
                        "product_display_name": {
                          "type": "string",
                          "description": "Product name"
                        },
                        "stock": {
                          "type": "integer",
                          "description": "Available stock quantity"
                        },
                        "price": {
                          "type": "number",
                          "description": "Product price"
                        },
                        "master_category": {
                          "type": "string",
                          "description": "Master category"
                        },
                        "base_colour": {
                          "type": "string",
                          "description": "Base color"
                        }
                      }
                    },
                    {
                      "type": "object",
                      "properties": {
                        "found": {
                          "type": "boolean",
                          "description": "Whether products were found"
                        },
                        "count": {
                          "type": "integer",
                          "description": "Number of products found"
                        },
                        "products": {
                          "type": "array",
                          "items": {
                            "type": "object"
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad request - ID or name parameter required"
          }
        }
      }
    }
  }
}
